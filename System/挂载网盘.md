# 挂载网盘


[[toc]]




## flag

* [https://github.com/topics/cloud-storage](https://github.com/topics/cloud-storage)
* [https://github.com/topics/file-sharing](https://github.com/topics/file-sharing)
* [魔改DirectoryLister支持Markdown](https://github.com/woytu/DirectoryLister)
* [php-zdir本地网盘](https://github.com/helloxz/zdir)
* [ShareList 是一个易用的网盘工具，支持快速挂载 GoogleDrive、OneDrive ](https://github.com/reruin/sharelist)
* [https://github.com/cloudreve](https://github.com/cloudreve)
* [归档 | 无岸海](https://noshore.cn/archives)


- [MOVER.IO文件迁移到OneDrive](https://mp.weixin.qq.com/s/ZHpxASTpOz0Y3i6HoGENKw)
   - [https://mover.io](https://mover.io)
- [Air Explorer：全球各大网盘服务之间文件同步工具](https://51.ruyo.net/16019.html)
   - [https://www.airexplorer.net](https://www.airexplorer.net)
- [https://www.goodsync.com/cn](https://www.goodsync.com/cn)
- [https://www.raidrive.com](https://www.raidrive.com)
- [https://github.com/maple3142/heroku-aria2c](https://github.com/maple3142/heroku-aria2c)
   - [利用Heroku部署Aria2离线下载并同步上传到Onedrive等网盘](https://huaien.co/technology/heroku-aria2-rclone)
- [https://github.com/moeik/Heroku_aria2](https://github.com/moeik/Heroku_aria2)


## GoogleDrive

> GoogleDrive一天好像最多750G，跑多就出问题

* Google Drive 之间转存 [https://gsuitetips.com/tools/copy-folder](https://gsuitetips.com/tools/copy-folder)
* [一个无需服务器的Google Drive目录索引程序](https://www.moerats.com/archives/1001)
* [https://github.com/search?q=goindex](https://github.com/search?q=goindex)
* [https://github.com/maple3142/GDIndex](https://github.com/maple3142/GDIndex)
* [https://github.com/5Lin/goindex](https://github.com/5Lin/goindex)
* [https://github.com/yanzai/goindex](https://github.com/yanzai/goindex)
* [https://github.com/Aicirou/goindex-theme-acrou](https://github.com/Aicirou/goindex-theme-acrou)
* create-share-teamdrive [https://github.com/yyuueexxiinngg/some-scripts](https://github.com/yyuueexxiinngg/some-scripts)
* [Plexdrive/Rclone+Google Drive搭建无限容量的媒体库](https://www.moerats.com/archives/870)
* [挂载GoogleDrive](https://www.moerats.com/archives/481)
* [解决Rclone挂载Google Drive时上传失败和内存占用高等问题](https://www.moerats.com/archives/877)
* [Rclone高级玩法--利用服务账号突破日流量750G限制](http://blog.jialezi.net/?post=153)
* Google Drive 百宝箱 [https://github.com/iwestlin/gd-utils](https://github.com/iwestlin/gd-utils)



### 复制共享文件

* [复制共享文件夹/下载远程文件到自己的GoogleDrive](http://blog.jialezi.net/?post=139)
* [https://github.com/ericyd/gdrive-copy](https://github.com/ericyd/gdrive-copy)
* [https://github.com/Spazzlo/folderclone](https://github.com/Spazzlo/folderclone)


**搜索`copy`并安装以下应用**

* [Copy, URL to Google Drive™](https://chrome.google.com/webstore/detail/copy-url-to-google-drive/hhkdailooaapiplkadgdkkllbnkjpbel)
* [Drive Files to OneDrive™](https://chrome.google.com/webstore/detail/drive-files-to-onedrive/pcagpleiioillikneeillgemaanajfae)

> 方式一：在文件夹上右键选择【打开方式】->【关联更多应用】

> 方式二：打开链接[https://www.google.com/enterprise/marketplace](https://www.google.com/enterprise/marketplace)



### 直链获取

* [Cloudflare Workers版直链工具](https://github.com/reruin/workers/tree/master/link)
   * [https://link.reruin.workers.dev](https://link.reruin.workers.dev)
* [https://link.gimhoy.com](https://link.gimhoy.com)
* https://api.moeclub.org/GoogleDrive/单文件ID
* https://gdlink.432100.xyz/?id=单文件ID
* [Google Drive网盘文件直链获取一键脚本](https://www.moerats.com/archives/571/)



### 团队盘

* 英国谢菲尔德大学：[https://gdrive.zppcw.cn](https://gdrive.zppcw.cn)
* 404 NOT FOUND：[https://gd.404edu.workers.dev](https://gd.404edu.workers.dev)
* yesyesxx.me：[https://gd.zxd.workers.dev](https://gd.zxd.workers.dev)
* alum.ccu.edu.tw：[http://leon.educationhost.cloud](http://leon.educationhost.cloud)
* swccd.edu团队盘：[https://teamdrive.xcpx.workers.dev](https://teamdrive.xcpx.workers.dev)
* 洛杉矶加利福尼亚大学团队盘：[https://ucla.ur.workers.dev](https://ucla.ur.workers.dev)
* 日本国際大学团队盘：[https://iuj.ur.workers.dev](https://iuj.ur.workers.dev)
* 自动创建：[https://www.teamdrive.workers.dev](https://www.teamdrive.workers.dev)
* [https://td.fastio.me](https://td.fastio.me)
* [https://teamdrive.mfoxx.workers.dev](https://teamdrive.mfoxx.workers.dev)





## OneDrive

+ [https://github.com/topics/onedrive](https://github.com/topics/onedrive)

* [https://github.com/zayabighead/msautocreate](https://github.com/zayabighead/msautocreate)
* [https://github.com/HuJK/O365-UC](https://github.com/HuJK/O365-UC)
* [https://github.com/xb2016/New-Mso-User](https://github.com/xb2016/New-Mso-User)
* [https://github.com/vcheckzen/FODI](https://github.com/vcheckzen/FODI)
   * [使用CloudFlare Workers 零成本部署 OneDrive 文件列表程序FODI（Fast OneDrive Index）](https://www.shanyemangfu.com/cf-fodi.html)
   * [Onedrive分享型网盘搭建 - FODI](https://bili33.top/2020/02/09/FODI)
* [https://github.com/qkqpttgf/OneManager-php](https://github.com/qkqpttgf/OneManager-php)
   * [利用heroku搭建Onedrive目录列表](https://www.hostloc.com/thread-617698-1-1.html)

+ [OLAINDEX OneDrive目录文件索引应用](https://github.com/WangNingkai/OLAINDEX)
+ [https://github.com/YukiCoco/OLAINDEX-Magic](https://github.com/YukiCoco/OLAINDEX-Magic)
+ [https://github.com/MoeClub/OneList](https://github.com/MoeClub/OneList)
+ [https://github.com/xieqifei/OneindexN](https://github.com/xieqifei/OneindexN)
+ [PyOne基于Python的onedrive文件本地化浏览系统](https://github.com/abbeyokgo/PyOne)
+ [https://github.com/heymind/OneDrive-Index-Cloudflare-Worker](https://github.com/heymind/OneDrive-Index-Cloudflare-Worker)
+ [https://github.com/SomeBottle/OdIndex](https://github.com/SomeBottle/OdIndex)
+ [https://github.com/steven52880/Oneindex-Mod](https://github.com/steven52880/Oneindex-Mod)

- [教育 SKU 参考](https://docs.microsoft.com/zh-cn/microsoftteams/sku-reference-edu)


> onedrive默认只同步指定的onedrive文件夹，为了让它同步其他的文件夹，可以在命令行（以管理员身份运行的）使用以下代码创建一个软链接

```powershell
mklink /j "onedrive文件夹地址\需要同步的文件夹名" "需要同步的文件夹地址"
/D 创建目录符号链接，默认为文件符号链接
/H 创建硬链接，而不是符号链接
/J 创建目录联接
```


> 注意：服务器最好是`KVM`的，`OpenVZ`需要给你的服务商发TK告诉他们开一下`FUSE`，如果没有`FUSE`是没办法挂载的。


### 获取`access_token`

**下载Windows版`Rclone`**

* [https://github.com/rclone/rclone/releases](https://github.com/rclone/rclone/releases)

> 解压后进入文件夹，在路径地址栏中输入`cmd`打开CMD

**执行命令**

```batch
rclone authorize "onedrive"
```

> 运行后会自动打开浏览器，然后登录帐号，会进入接受许可页面，点击接受，然后后会跳转到授权成功的页面，此时页面显示`Success!`。

**查看`access_token`**

> 切换到CMD窗口，此时已经有`access_token`了。
>
> 把`{}`包含里面的内容复制下来保存好，后面需要用到（包含括号一起复制保存）

![](/images/Rclone_access_token.png)


### 安装配置`Rclone`

**安装基础工具**

```bash
yum -y install wget unzip screen fuse fuse-devel
```

**安装`Rclone`**

```bash
curl https://rclone.org/install.sh | sudo bash
```

> 安装完成后最后两行显示
>> `rclone v1.48.0 has successfully installed.`
>> `Now run "rclone config" for setup. Check https://rclone.org/docs/ for more details.`

**配置**

```bash
rclone config
```

<details>
<summary><b>展开配置详情，注意看中文注释部分</b></summary>

```diff
No remotes found - make a new one
n) New remote
s) Set configuration password
q) Quit config
n/s/q> n            # 选择n新建一个远程

name> onedrive      # 取一个名称为onedrive

Type of storage to configure.
Enter a string value. Press Enter for the default ("").
Choose a number from below, or type in your own value
 1 / A stackable unification remote, which can appear to merge the contents of several remotes
   \ "union"
 2 / Alias for an existing remote
   \ "alias"
 3 / Amazon Drive
   \ "amazon cloud drive"
 4 / Amazon S3 Compliant Storage Provider (AWS, Alibaba, Ceph, Digital Ocean, Dreamhost, IBM COS, Minio, etc)
   \ "s3"
 5 / Backblaze B2
   \ "b2"
 6 / Box
   \ "box"
 7 / Cache a remote
   \ "cache"
 8 / Dropbox
   \ "dropbox"
 9 / Encrypt/Decrypt a remote
   \ "crypt"
10 / FTP Connection
   \ "ftp"
11 / Google Cloud Storage (this is not Google Drive)
   \ "google cloud storage"
12 / Google Drive
   \ "drive"
13 / Hubic
   \ "hubic"
14 / JottaCloud
   \ "jottacloud"
15 / Koofr
   \ "koofr"
16 / Local Disk
   \ "local"
17 / Mega
   \ "mega"
18 / Microsoft Azure Blob Storage
   \ "azureblob"
19 / Microsoft OneDrive
   \ "onedrive"
20 / OpenDrive
   \ "opendrive"
21 / Openstack Swift (Rackspace Cloud Files, Memset Memstore, OVH)
   \ "swift"
22 / Pcloud
   \ "pcloud"
23 / QingCloud Object Storage
   \ "qingstor"
24 / SSH/SFTP Connection
   \ "sftp"
25 / Webdav
   \ "webdav"
26 / Yandex Disk
   \ "yandex"
27 / http Connection
   \ "http"
Storage> 19          # 挂载的网盘，这里选择19为onedrive

** See help for onedrive backend at: https://rclone.org/onedrive/ **

Microsoft App Client Id
Leave blank normally.
Enter a string value. Press Enter for the default ("").
client_id>           # 直接回车，不输入任何内容

Microsoft App Client Secret
Leave blank normally.
Enter a string value. Press Enter for the default ("").
client_secret>       # 直接回车，不输入任何内容

Edit advanced config? (y/n)
y) Yes
n) No
y/n> n               # 是否配置高级设置，这里我们直接No，选择n

Remote config
Use auto config?
 * Say Y if not sure
 * Say N if you are working on a remote or headless machine
y) Yes
n) No
y/n> y                # 是否使用自动设置，同样直接NO，选择n

For this to work, you will need rclone available on a machine that has a web browser available.
Execute the following on your machine:
	rclone authorize "onedrive"
Then paste the result below:
result>               # 这里输入在Windows下CMD中获取的access_token

Choose a number from below, or type in an existing value
 1 / OneDrive Personal or Business
   \ "onedrive"
 2 / Root Sharepoint site
   \ "sharepoint"
 3 / Type in driveID
   \ "driveid"
 4 / Type in SiteID
   \ "siteid"
 5 / Search a Sharepoint site
   \ "search"
Your choice> 1          # 这里选择1，onedrive个人版或是商业版

Found 1 drives, please select the one you want to use:
0: OneDrive (business) id=b!jgC84eM3ckGels8kZg0AjrRlBrvtdTVOnbzPXRHOY-QpnI7rGSfRTYa-UqDPQLRu
Chose drive to use:> 0   # 提示找到一个驱动器，输入找到的序号0

Found drive 'root' of type 'business', URL: https://hkbaom-my.sharepoint.com/personal/tel4916_my365_site/Documents
Is that okay?
y) Yes
n) No
y/n> y                  # 找到“business”类型的驱动器，y确认类型

--------------------
y) Yes this is OK
e) Edit this remote
d) Delete this remote
y/e/d> y               # 确认配置

Current remotes:

Name                 Type
====                 ====
onedrive             onedrive

e) Edit existing remote
n) New remote
d) Delete remote
r) Rename remote
c) Copy remote
s) Set configuration password
q) Quit config
e/n/d/r/c/s/q> q      # 输入q，退出配置
```

</details>

> 以上就配置好了，剩下的就是挂载了

**[挂载](#rclone-mount)**


**卸载**

```bash
fusermount -qzu LocalFolder
```





## `Rclone`

* [https://github.com/rclone/rclone](https://github.com/rclone/rclone)
* [rclone配置](https://rclone.org/commands/rclone_config)
* [https://softlns.github.io/2016/11/28/rclone-guide](https://softlns.github.io/2016/11/28/rclone-guide)
* [Rclone 进阶使用教程](https://p3terx.com/archives/rclone-advanced-user-manual-common-command-parameters.html)
* [常用的rclone命令](http://zhangzr.com/2018/11/08/rclone)
* [使用 rclone](https://cloud.ibm.com/docs/services/cloud-object-storage?topic=cloud-object-storage-rclone&locale=zh-CN)

+ rclone Web GUI [https://github.com/ElonH/RcloneNg](https://github.com/ElonH/RcloneNg)
+ [https://github.com/xyou365/AutoRclone](https://github.com/xyou365/AutoRclone)
+ [https://github.com/donwa/gclone](https://github.com/donwa/gclone)
+ [https://github.com/mawaya/rclone](https://github.com/mawaya/rclone)

```bash
rclone config - 以控制会话的形式添加rclone的配置，配置保存在.rclone.conf文件中。
rclone mount - 将网盘挂载为本地磁盘
rclone copy - 将文件从源复制到目的地址，跳过已复制完成的。
rclone sync - 将源数据同步到目的地址，只更新目的地址的数据。–dry-run标志来检查要复制、删除的数据
rclone move - 将源数据移动到目的地址。
rclone delete - 删除指定路径下的文件内容。
rclone purge - 清空指定路径下所有文件数据。
rclone mkdir - 创建一个新目录。
rclone rmdir - 删除空目录。
rclone check - 检查源和目的地址数据是否匹配。
rclone ls - 列出指定路径下所有的文件以及文件大小和路径。
rclone lsd - 列出指定路径下所有的目录/容器/桶。
rclone lsl - 列出指定路径下所有文件以及修改时间、文件大小和路径。
rclone md5sum - 为指定路径下的所有文件产生一个md5sum文件。
rclone sha1sum - 为指定路径下的所有文件产生一个sha1sum文件。
rclone size - 获取指定路径下，文件内容的总大小。.
rclone version - 查看当前版本。
rclone cleanup - 清空remote。
rclone dedupe - 交互式查找重复文件，进行删除/重命名操作。
```


<details>
<summary><b>展开查看全局参数</b></summary>

* [https://rclone.org/flags](https://rclone.org/flags)

| 参数                                 	| 说明                                                                                                                      	|
|--------------------------------------	|---------------------------------------------------------------------------------------------------------------------------	|
| --ask-password                       	| 允许提示输入密码以进行加密配置。 （默认为true）                                                                           	|
| --auto-confirm                       	| 如果启用，请勿请求控制台确认。                                                                                            	|
| --backup-dir string                  	| 使备份成为基于DIR的层次结构。                                                                                             	|
| --bind string                        	| 绑定到传出连接的本地地址，IPv4，IPv6或名称。                                                                              	|
| --buffer-size SizeSuffix             	| 读取每个--transfer文件时的内存缓冲区大小。 （默认为16M）                                                                  	|
| --bwlimit BwTimetable                	| 带宽限制（千字节/秒），或者使用后缀b | k | M | G或完整的时间表。                                                          	|
| --ca-cert string                     	| 用于验证服务器的CA证书                                                                                                    	|
| --cache-dir string                   	| 目录rclone将用于缓存。 （默认为"$HOME/.cache/rclone"）                                                                    	|
| --checkers int                       	| 要并行运行的检查程序数。 （默认为8）                                                                                      	|
| -c, --checksum                       	| 根据校验和（如果有）和大小（而不是修改时间和大小）跳过                                                                    	|
| --client-cert string                 	| 用于相互TLS身份验证的客户端SSL证书（PEM）                                                                                 	|
| --client-key string                  	| 用于相互TLS身份验证的客户端SSL私钥（PEM）                                                                                 	|
| --compare-dest string                	| 使用DIR从服务器端复制文件。                                                                                               	|
| --config string                      	| 配置文件。 （默认为"$HOME/.config/rclone/rclone.conf"）                                                                   	|
| --contimeout duration                	| 连接超时（默认为1m0s）                                                                                                    	|
| --copy-dest string                   	| 也将dest与DIR进行比较。                                                                                                   	|
| --cpuprofile string                  	| 将cpu配置文件写入文件                                                                                                     	|
| --delete-after                       	| 同步时，传输后删除目标位置上的文件（默认）                                                                                	|
| --delete-before                      	| 同步时，在传输之前删除目标文件                                                                                            	|
| --delete-during                      	| 同步时，在传输过程中删除文件                                                                                              	|
| --delete-excluded                    	| 从同步中删除目标上的文件                                                                                                  	|
| --disable string                     	| 禁用以逗号分隔的功能列表。使用帮助查看列表。                                                                              	|
| -n, --dry-run                        	| 在没有永久更改的情况下进行试运行                                                                                          	|
| --dump DumpFlags                     	| 要转储的项目列表：标头，正文，请求，响应，身份验证，过滤器，goroutines，openfiles                                         	|
| --dump-bodies                        	| 转储HTTP标头和正文-可能包含敏感信息                                                                                       	|
| --dump-headers                       	| 转储HTTP标头-可能包含敏感信息                                                                                             	|
| --exclude stringArray                	| 排除文件匹配模式                                                                                                          	|
| --exclude-from stringArray           	| 从文件中读取排除模式                                                                                                      	|
| --exclude-if-present string          	| 如果文件名存在，则排除目录                                                                                                	|
| --fast-list                          	| 如果可用，请使用递归列表。使用更多的内存，但更少的事务。                                                                  	|
| --files-from stringArray             	| 从文件中读取源文件名列表                                                                                                  	|
| -f, --filter stringArray             	| 添加文件过滤规则                                                                                                          	|
| --filter-from stringArray            	| 从文件中读取过滤模式                                                                                                      	|
| --ignore-case                        	| 忽略过滤器中的大小写（不区分大小写）                                                                                      	|
| --ignore-case-sync                   	| 同步时忽略大小写                                                                                                          	|
| --ignore-checksum                    	| 跳过校验和的过帐副本检查。                                                                                                	|
| --ignore-errors                      	| 即使有I / O错误也要删除                                                                                                   	|
| --ignore-existing                    	| 跳过目标上存在的所有文件                                                                                                  	|
| --ignore-size                        	| 跳过使用mod-time或checksum时忽略大小。                                                                                    	|
| -I, --ignore-times                   	| 不要跳过匹配大小和时间的文件-传输所有文件                                                                                 	|
| --immutable                          	| 不要修改文件。如果现有文件已被修改，则失败。                                                                              	|
| --include stringArray                	| 包含文件匹配模式                                                                                                          	|
| --include-from stringArray           	| 从文件中读取包含模式                                                                                                      	|
| --log-file string                    	| 将所有内容记录到该文件                                                                                                    	|
| --log-format string                  	| 日志格式选项的逗号分隔列表（默认为“日期，时间”）                                                                          	|
| --log-level string                   	| 日志级别DEBUG | INFO | NOTICE | ERROR（默认为“ NOTICE”）                                                                  	|
| --low-level-retries int              	| 低级重试次数。 （默认为10）                                                                                               	|
| --max-age Duration                   	| 仅传输s或后缀ms | s | m | h | d | w | M | y小于此值的文件（默认关闭）                                                     	|
| --max-backlog int                    	| 同步或检查积压的最大对象数。 （默认为10000）                                                                              	|
| --max-delete int                     	| 同步时，限制删除次数（默认为-1）                                                                                          	|
| --max-depth int                      	| 如果设置，则将递归深度限制为此。 （默认为-1）                                                                             	|
| --max-size SizeSuffix                	| 仅传输小于k或后缀b | k | M | G的文件（默认为关闭）                                                                        	|
| --max-stats-groups int               	| 要保留在内存中的统计信息组的最大数量。在最大的最旧的位置将被丢弃。 （默认为1000）                                         	|
| --max-transfer SizeSuffix            	| 要传输的最大数据大小。 （默认关闭）                                                                                       	|
| --memprofile string                  	| 将内存配置文件写入文件                                                                                                    	|
| --min-age Duration                   	| 仅传输s或后缀ms | s | m | h | d | w | M | y大于此长度的文件（默认关闭）                                                   	|
| --min-size SizeSuffix                	| 仅传输大于k或后缀b | k | M | G的文件（默认关闭）                                                                          	|
| --modify-window duration             	| 认为最大时间差相同（默认为1ns）                                                                                           	|
| --multi-thread-cutoff SizeSuffix     	| 对于此大小以上的文件，请使用多线程下载。 （默认为250M）                                                                   	|
| --multi-thread-streams int           	| 用于多线程下载的最大流数。 （默认为4）                                                                                    	|
| --no-check-certificate               	| 不要验证服务器SSL证书。不安全                                                                                             	|
| --no-gzip-encoding                   	| 不要设置Accept-Encoding：gzip。                                                                                           	|
| --no-traverse                        	| 不要遍历副本上的目标文件系统。                                                                                            	|
| --no-update-modtime                  	| 如果文件相同，请不要更新目标模块时间。                                                                                    	|
| -P, --progress                       	| 在传输过程中显示进度。                                                                                                    	|
| -q, --quiet                          	| 打印尽可能少的东西                                                                                                        	|
| --rc                                 	| 启用远程控制服务器。                                                                                                      	|
| --rc-addr string                     	| IP地址：端口或：端口绑定服务器。 （默认为“ localhost：5572”）                                                             	|
| --rc-allow-origin string             	| 设置允许的CORS原点。                                                                                                      	|
| --rc-baseurl string                  	| URL的前缀-根目录留空。                                                                                                    	|
| --rc-cert string                     	| SSL PEM密钥（证书和CA证书的串联）                                                                                         	|
| --rc-client-ca string                	| 客户证书颁发机构用来验证客户端                                                                                            	|
| --rc-files string                    	| 要在HTTP服务器上提供服务的本地文件的路径。                                                                                	|
| --rc-htpasswd string                 	| htpasswd文件-如果未提供，则不进行身份验证                                                                                 	|
| --rc-job-expire-duration duration    	| 使已完成的异步作业过期，且早于该值（默认值为1m0s）                                                                        	|
| --rc-job-expire-interval duration    	| 检查过期的异步作业的时间间隔（默认为10s）                                                                                 	|
| --rc-key string                      	| SSL PEM私钥                                                                                                               	|
| --rc-max-header-bytes int            	| 请求标头的最大大小（默认为4096）                                                                                          	|
| --rc-no-auth                         	| 某些方法不需要身份验证。                                                                                                  	|
| --rc-pass string                     	| 认证密码。                                                                                                                	|
| --rc-realm string                    	| 身份验证领域（默认为“ rclone”）                                                                                           	|
| --rc-serve                           	| 启用投放远程对象。                                                                                                        	|
| --rc-server-read-timeout duration    	| 服务器读取数据的超时时间（默认为1h0m0s）                                                                                  	|
| --rc-server-write-timeout duration   	| 服务器写入数据的超时时间（默认为1h0m0s）                                                                                  	|
| --rc-user string                     	| 认证用户名。                                                                                                              	|
| --rc-web-fetch-url string            	| 用于获取webgui发行版的URL。 （默认为“ https://api.github.com/repos/rclone/rclone-webui-react/releases/latest”）           	|
| --rc-web-gui                         	| 在本地主机上启动WebGUI                                                                                                    	|
| --rc-web-gui-update                  	| 更新/强制更新为Web GUI的最新版本                                                                                          	|
| --retries int                        	| 如果操作失败，请重试此操作多次（默认值为3）                                                                               	|
| --retries-sleep duration             	| 重试操作失败之间的间隔，例如500ms，60s，5m。 （0禁用）                                                                    	|
| --size-only                          	| 仅基于大小跳过，不基于调制时间或校验和                                                                                    	|
| --stats duration                     	| 打印状态之间的间隔，例如500ms，60s，5m。 （0禁用）（默认1m0s）                                                            	|
| --stats-file-name-length int         	| 统计资料中的最大档案名称长度。 0为无限制（默认为45）                                                                      	|
| --stats-log-level string             	| 显示--stats输出的日志级别DEBUG | INFO | NOTICE | ERROR（默认为“ INFO”）                                                   	|
| --stats-one-line                     	| 使统计数据适合一行。                                                                                                      	|
| --stats-one-line-date                	| 启用--stats-one-line并添加当前日期/时间前缀。                                                                             	|
| --stats-one-line-date-format string  	| 启用--stats-one-line-date并使用自定义格式的日期。将日期字符串括在双引号中。请参见https://golang.org/pkg/time/#Time.Format 	|
| --stats-unit string                  	| 以“位”或“字节” /秒（默认“字节”）的形式在统计数据中显示数据速率                                                            	|
| --streaming-upload-cutoff SizeSuffix 	| 如果文件大小未知，则切换到分块上传的截止时间。上载到截止时间或文件结束时开始。 （默认为100k）                             	|
| --suffix string                      	| 添加到已更改文件的后缀。                                                                                                  	|
| --suffix-keep-extension              	| 使用--suffix时保留扩展名。                                                                                                	|
| --syslog                             	| 使用Syslog进行记录                                                                                                        	|
| --syslog-facility string             	| syslog的功能，例如KERN，USER，...（默认为“ DAEMON”）                                                                      	|
| --timeout duration                   	| IO空闲超时（默认为5m0s）                                                                                                  	|
| --tpslimit float                     	| 将每秒HTTP事务数限制为此。                                                                                                	|
| --tpslimit-burst int                 	| --tpslimit的最大事务爆发次数。 (默认为1)                                                                                  	|
| --track-renames                      	| 同步时，请重命名跟踪文件并在可能的情况下进行服务器端移动                                                                  	|
| --transfers int                      	| 要并行运行的文件传输数。 （默认为4）                                                                                      	|
| -u, --update                         	| 跳过目标上较新的文件。                                                                                                    	|
| --use-cookies                        	| 启用会话cookiejar。                                                                                                       	|
| --use-json-log                       	| 使用json日志格式。                                                                                                        	|
| --use-mmap                           	| 使用mmap分配器（请参阅文档）。                                                                                            	|
| --use-server-modtime                 	| 使用服务器修改时间而不是对象元数据                                                                                        	|
| --user-agent string                  	| 将用户代理设置为指定的字符串。默认值为rclone /版本（默认为"rclone/v1.49.5"）                                              	|
| -v, --verbose count                  	| 打印更多的东西（重复更多）                                                                                                	|

</details>


### `rclone config`

> 以控制会话的形式添加`rclone`的配置，配置保存在`/root/.config/rclone/rclone.conf`

- 显示配置文件的路径

```bash
rclone config file
```


- 显示配置文件信息

```bash
rclone config show
```




### `rclone mount`

> 将网盘挂载为本地磁盘

* [rclone挂载](https://tip.rclone.org/commands/rclone_mount)


> 在运行挂载命令后，**SSH窗口会出现中断，光标丢失**，需要断开重新连接。


**命令格式**

> 只需修改`DriveName:Folder LocalFolder`
>> `DriveName` 这里就是配置第二步输入的`name`
>>
>> `Folder` 网盘的中的文件夹，`/`或者留空为网盘根目录
>>
>> `LocalFolder` 本地文件夹

```bash
rclone mount DriveName:Folder LocalFolder \
--copy-links --no-gzip-encoding --no-check-certificate \
--allow-other --allow-non-empty --umask 000 \
--transfers 4 --buffer-size 32M --low-level-retries 200 \
--dir-cache-time 12h --vfs-read-chunk-size 32M \
--vfs-read-chunk-size-limit 1G
```



**挂载参数**

| 参数                                   	| 说明                                                                                                      	|
|----------------------------------------	|-----------------------------------------------------------------------------------------------------------	|
| --allow-non-empty                      	| 允许在非空目录上挂载。                                                                                    	|
| --allow-other                          	| 允许访问其他用户。                                                                                        	|
| --allow-root                           	| 允许访问root用户。                                                                                        	|
| --attr-timeout duration                	| 缓存文件/目录属性的时间。 （默认1秒）                                                                     	|
| --daemon                               	| 将mount作为守护程序运行（后台模式）。                                                                     	|
| --daemon-timeout duration              	| rclone响应内核的时间限制（并非所有操作系统都支持）。                                                      	|
| --debug-fuse                           	| 调试FUSE内部-需要-v。                                                                                     	|
| --default-permissions                  	| 使内核根据文件模式强制执行访问控制。                                                                      	|
| --dir-cache-time duration              	| 是时候缓存目录条目了。 （默认为5m0s）                                                                     	|
| --dir-perms FileMode                   	| 目录权限（默认0777）                                                                                      	|
| --file-perms FileMode                  	| 文件权限（默认0666）                                                                                      	|
| --fuse-flag stringArray                	| 直接传递给libfuse / WinFsp的标志或参数。如果需要，请重复。                                                	|
| --gid uint32                           	| 覆盖文件系统设置的gid字段。 （默认为1000）                                                                	|
| -h, --help                             	| 帮助安装                                                                                                  	|
| --max-read-ahead SizeSuffix            	| 可以为顺序读取预取的字节数。 （默认为128k）                                                               	|
| --no-checksum                          	| 不要比较下载/下载时的校验和。                                                                             	|
| --no-modtime                           	| 不要读/写修改时间（可以加快修改速度）。                                                                   	|
| --no-seek                              	| 不允许在文件中查找。                                                                                      	|
| -o, --option stringArray               	| libfuse / WinFsp的选项。如果需要，请重复。                                                                	|
| --poll-interval duration               	| 等待两次轮询更改之间的时间。必须小于dir-cache-time。仅在受支持的遥控器上。设置为0禁用。 （默认为1m0s）    	|
| --read-only                            	| 挂载为只读。                                                                                              	|
| --uid uint32                           	| 覆盖文件系统设置的uid字段。 （默认为1000）                                                                	|
| --umask int                            	| 覆盖文件系统设置的权限位。                                                                                	|
| --vfs-cache-max-age duration           	| 缓存中对象的最长期限。 （默认为1h0m0s）                                                                   	|
| --vfs-cache-max-size SizeSuffix        	| 缓存中对象的最大总大小。 （默认关闭）                                                                     	|
| --vfs-cache-mode CacheMode             	| 缓存模式 关闭(off)\|最小(minimal)\|写入(writes)\|完全(full)（默认关闭）                                       |
| --vfs-cache-poll-interval duration     	| 轮询缓存以查找陈旧对象的时间间隔。 （默认为1m0s）                                                         	|
| --vfs-read-chunk-size SizeSuffix       	| 逐块读取源对象。 （默认为128M）                                                                           	|
| --vfs-read-chunk-size-limit SizeSuffix 	| 如果大于--vfs-read-chunk-size，则在每次读取块后将块大小加倍，直到达到限制。 “关闭”是无限的。 （默认关闭） 	|
| --volname string                       	| 设置卷名（并非所有操作系统都支持）。                                                                      	|
| --write-back-cache                     	| 使内核缓冲区写入，然后再将其发送到rclone。否则，将使用直写式缓存。                                        	|


**查看是否挂载成功**

```bash
df -h
```

**设置自启动**

- 第一种

> 在`vi /etc/rc.local`文件中按<kbd>Shift</kbd> + <kbd>g</kbd>（就是大写的`G`）跳转到末尾添加挂载命令

> 为防止启动执行失败，最好执行一次`chmod +x /etc/rc.d/rc.local`进行授权

```bash
/usr/bin/rclone mount gdrive:/ /gdrive \
--copy-links --no-gzip-encoding \
--no-check-certificate --allow-other \
--allow-non-empty --umask 000 > /dev/null 2>&1 &
```

或者使用`tmux`

```bash
# 创建新会话并在后台执行命令
tmux new -s onedrive -d "/usr/bin/rclone mount gdrive:/ /gdrive \
--copy-links --no-gzip-encoding --no-check-certificate \
--allow-other --allow-non-empty --umask 000"
```



- 第二种

> 下载[rcloned](/files/rcloned)文件到`/etc/init.d/`目录下，修改文件中的`NAME`、`REMOTE`、`LOCAL`变量，
> `chmod +x /etc/init.d/rcloned`执行授权，`update-rc.d -f rcloned defaults`执行更新，`bash /etc/init.d/rcloned start`运行



### `rclone copy`

> 可以实现两个云盘之间对拷备份文件，不占用硬盘。

> 将文件从源复制到目的地址，跳过已复制完成的。命令格式如下

```bash
rclone copy source:sourcepath dest:destpsth
```

- 注：

> 1、`rclone copy` 复制总是指定路径下的数据；而不是当前目录。
>
> 2、`–no-traverse` 标志用于控制是否列出目的地址目录。

### `rclone sync`

```bash
rclone sync source:path dest:path
```

- 注：

> 1、同步数据时，可能会删除目的地址的数据；建议先使用–dry-run标志来检查要复制、删除的数据。
>
> 2、同步数据出错时，不会删除任何目的地址的数据。
>
> 3、`rclone sync`同步的始终是path目录下的数据，而不是path目录。（空目录将不会被同步）

### `rclone move`

```bash
rclone move source:path dest:path
```

- 注：

> 1、同步数据时，可能会删除目的地址的数据；建议先使用–dry-run标志来检查要复制、删除的数据。

### `rclone purge`

> 清空path目录和数据。命令格式如下：

```bash
rclone purge remote:path
```

- 注：

> 1、此命令，`include/exclude`过滤器失效。
>
> 2、删除path目录下部分数据，请使用`rclone delete`命令

### `rclone mkdir`

- 创建path目录

```bash
rclone mkdir remote:path
```

### `rclone rmdir`

> 删除一个空目录。命令格式如下：

```bash
rclone rmdir remote:path
```

- 注：

> 1、不能删除非空的目录，删除非空目录请使用`rclone purge`

### `rclone check`

> 检查源和目标地址文件是否匹配。命令格式如下：

```bash
rclone check source:path dest:path
```

- 注：

> 1、`–size-only`标志用于指定，只比较大小，不比较MD5SUMs。

### `rclone ls`

> 列出指定path下，所有的文件以及文件大小和路径。命令格式如下：

```bash
rclone ls remote:path
```

### `rclone lsd`

> 列出指定path下，所有目录、容器、桶。命令格式如下：

```bash
rclone lsd remote:path
```

### `rclone delete`

> 删除指定目录的内容。命令格式如下：

```bash
rclone delete remote:path
```

- 注：

> 1、不同于`rclone purge`、`rclone delete`可使用`include/exclude`过滤器选择删除文件内容。
>
> `eg` 删除文件大小大于100M的文件

```bash
# 先检查哪些文件将被删除
# 使用rclone lsl 列出大于100M的文件
rclone lsl remote:path --min-size 100M
# 使用--dry-run 检查将要被删除的文件
rclone delete remote:path --dry-run --min-size 100M
# 删除最大100k的图片
rclone delete onedrive:/images --dry-run --max-size 100k
	
# 使用 rclone delete 进行文件删除
rclone delete remote:path --min-size 100M
```

### `rclone size`

> 获取指定path下所有数据文件的总大小。命令格式如下：

```bash
rclone size remote:path
```


### `rclone dedupe`

> 交互式查找重复文件，进行删除/重命名操作

- 语法

```bash
rclone dedupe [mode] remote:path [flags]
```

- flags

> --dedupe-mode string
>
> Dedupe mode interactive(互动，默认)|skip(跳过)|first(第一个)|newest(最新)|oldest(最老的)|rename(改名)






## 分享链接

+ [GoogleDrive-woytu可查看](https://gd.woytu.workers.dev)
+ [GoogleDrive-PP密码可查看](https://pp.woytu.workers.dev)